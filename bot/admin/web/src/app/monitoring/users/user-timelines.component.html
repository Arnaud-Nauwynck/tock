<!--
  ~ Copyright (C) 2017 VSCT
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<md-sidenav-container>
  <md-sidenav mode="side" opened="true">
    <div
      infinite-scroll
      [infiniteScrollDistance]="2"
      [infiniteScrollThrottle]="300"
      (scrolled)="onScroll()">
      <md-list>
        <md-list-item *ngFor="let user of users">
          <img md-list-avatar src="{{user.userPreferences.picture ? user.userPreferences.picture : '/assets/images/people.png'}}"
               alt="{{user.userPreferences.firstName}} {{user.userPreferences.lastName}}">
          <h3 md-line> {{user.userPreferences.firstName}} {{user.userPreferences.lastName}}
            ({{user.userPreferences.locale}})</h3>
          <p md-line>
            <span *ngIf="user.lastActionText" class="lastActionText"> &quot; {{user.lastActionText}} &quot;</span>
            <button md-icon-button md-tooltip="Display dialog" color="primary" (click)="loadDialog(user)">
              <md-icon>forum</md-icon>
            </button>
          </p>
          <p md-line>
            <span class="lastUpdateDate"> created the {{user.userState.creationDate | amDateFormat: 'YYYY-MM-DD'}}-- updated {{user.lastUpdateDate | amTimeAgo}} </span>
          </p>
        </md-list-item>
      </md-list>
    </div>
  </md-sidenav>
   <div class="dialogs">
         <table *ngIf="userDialog">
           <tr *ngFor="let action of userDialog.actions">
             <td style="min-width:200px;"><span class="userAction" *ngIf="!action.isBot()">{{action.text}}</span></td>
             <td><span class="botAction" *ngIf="action.isBot()">{{action.text}}</span></td>
           </tr>
         </table>
   </div>
</md-sidenav-container>
