<!--
  ~ Copyright (C) 2017 VSCT
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<md-card class="entities">
  <md-card-content>
    <md-card-title>Entity roles</md-card-title>
    <md-list>
      <tock-entity-details *ngFor="let e of state.entities | async" [entity]="e"></tock-entity-details>
    </md-list>
  </md-card-content>
</md-card>
<p></p>
<md-card class="entities">
  <md-card-content>
    <md-card-title>All Entity Types</md-card-title>
      <md-chip-list>
        <md-chip *ngFor="let e of state.entityTypes | async"
                 color="primary"
                 [removable]="e.namespace() === state.currentApplication.namespace"
                 (remove)="deleteEntityType(e)"
                 (click)="selectEntityType(e)">
          {{e.name}}
          <md-icon *ngIf="e.namespace() === state.currentApplication.namespace" mdChipRemove>cancel</md-icon>
        </md-chip>
      </md-chip-list>
  </md-card-content>
</md-card>
<md-card class="entities" *ngIf="this.selectedEntityType">
  <md-card-content>
    <md-card-title>Predefined values for {{ this.selectedEntityType.name }}</md-card-title>
      <table md-table [width]="'100%'">
        <thead md-head>
          <th md-column [width]="'20%'">Predefined Value</th>
          <th md-column [width]="'50%'">Synonyms</th>
          <th md-column [width]="'30%'">Actions</th>
        </thead>
        <tbody md-body>
          <tr *ngFor="let predefinedValue of this.selectedEntityType.predefinedValues">
            <td>{{ predefinedValue.value }}</td>
            <td>
              <md-chip-list>
                <md-chip *ngFor="let synonym of predefinedValue.synonyms.get(state.currentLocale)"
                         [removable]="true">
                  {{ synonym }}
                  <md-icon mdChipRemove (click)="deleteSynonym(predefinedValue, synonym)">cancel</md-icon>
                </md-chip>
              </md-chip-list>
            </td>
            <td>
              <md-input-container>
                <input mdInput placeholder="Add synonym" #syn (keyup.enter)="createSynonym(predefinedValue, syn.value)">
              </md-input-container>
              <button md-raised-button (click)="deletePredefinedValue(predefinedValue.value)" color="warn">Delete Predefined Value</button>
            </td>
          </tr>
          <tr>
            <td>
              <md-input-container>
                <input mdInput placeholder="Add predefined value" #pv (keyup.enter)="createPredefinedValue(pv.value)">
              </md-input-container>
            </td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
  </md-card-content>
</md-card>
